{% extends "base.html" %}

{% block title %}Editar Ordem - StockSim{% endblock %}

{% block content %}
<h2>Editar Ordem</h2>
<form action="/order/update/{{ order.id }}" method="post">
    <div class="mb-3">
        <label for="user_id" class="form-label">Utilizador</label>
        <select class="form-select" id="user_id" name="user_id" required>
            {% for user in users %}
            <option value="{{ user.id }}" {% if user.id == order.user_id %}selected{% endif %}>{{ user.name }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="mb-3">
        <label for="stock_id" class="form-label">Ação</label>
        <select class="form-select" id="stock_id" name="stock_id" required>
            {% for stock in stocks %}
            <option value="{{ stock.id }}" {% if stock.id == order.stock_id %}selected{% endif %}>{{ stock.name }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="mb-3">
        <label for="type" class="form-label">Tipo</label>
        <select class="form-select" id="type" name="type" required>
            <option value="buy" {% if order.type == 'buy' %}selected{% endif %}>Compra</option>
            <option value="sell" {% if order.type == 'sell' %}selected{% endif %}>Venda</option>
        </select>
    </div>
    <div class="mb-3">
        <label for="quantity" class="form-label">Quantidade</label>
        <input type="number" class="form-control" id="quantity" name="quantity" value="{{ order.quantity }}" required>
    </div>
    <div class="mb-3">
        <label for="price" class="form-label">Preço Unitário (€)</label>
        <input type="number" step="0.01" class="form-control" id="price" name="price" value="{{ order.price }}" required>
    </div>
    <button type="submit" class="btn btn-success">Atualizar</button>
    <a href="/orders" class="btn btn-secondary ms-2">Cancelar</a>
</form>
{% endblock %}
